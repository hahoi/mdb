(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"5e94":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",{staticStyle:{"max-width":"500px",margin:"auto"}},[s("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[s("q-item-label",{staticClass:"text-h6",attrs:{header:""}},[t._v("使用者管理")]),t._l(t.dbData,(function(t){return s("user-list",{key:t.email,attrs:{item:t}})}))],2)],1)},i=[],l=s("ded3"),n=s.n(l),c=s("fc1b"),o={name:"",data(){return{dbData:[]}},components:{UserList:s("74b3").default},created(){c["a"].collection("MDBUsers").get().then((t=>{t.forEach((t=>{this.dbData.push(n()({id:t.id},t.data()))}))})).catch((t=>{console.log(t.message)}))},mounted(){},watch:{},computed:{},methods:{}},r=o,m=s("2877"),d=s("9989"),h=s("1c1c"),u=s("0170"),p=s("eebe"),b=s.n(p),g=Object(m["a"])(r,a,i,!1,null,null,null);e["default"]=g.exports;b()(g,"components",{QPage:d["a"],QList:h["a"],QItemLabel:u["a"]})},"74b3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-item",{},[s("q-item-section",{attrs:{avatar:""}},[s("q-toggle",{attrs:{"checked-icon":"check",color:"green","unchecked-icon":"clear",toggle:t.checkOk()},model:{value:t.item.states,callback:function(e){t.$set(t.item,"states",e)},expression:"item.states"}})],1),s("q-item-section",{attrs:{top:""}},[s("q-item-label",{attrs:{lines:"1"}},[s("span",{staticClass:"text-weight-medium text-h6"},[t._v(t._s(t.item.name))])]),s("q-item-label",{attrs:{lines:"1"}},[s("span",{staticClass:"text-grey-8"},[t._v(t._s(t.item.email))])]),s("q-item-label",{attrs:{lines:"1"}},[s("span",{staticClass:"text-grey-8"},[t._v("Tel : "+t._s(t.item.telephone))])]),s("q-item-label",{attrs:{lines:"1"}},[s("span",{staticClass:"text-weight-medium"},[t._v("註冊")]),s("span",{staticClass:"text-grey-8"},[t._v(" "+t._s(t.createAt))])])],1),s("q-item-section",{attrs:{top:"",side:""}},[s("div",{staticClass:"text-grey-8 q-gutter-xs"},[s("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete"},on:{click:t.delFn}})],1)])],1)],1)},i=[],l=s("bd4c"),n=s("fc1b"),c={name:"",props:["item"],data(){return{first:!0,AllUsers:[],options:[]}},components:{},created(){},mounted(){this.ListAllUsers()},watch:{},computed:{createAt(){return l["a"].formatDate(this.item.createAt.toDate(),"YYYY-MM-DD HH:mm:ss")}},methods:{checkOk(){console.log(this.item.id,this.first),n["a"].collection("MDBUsers").doc(this.item.id).update({states:this.item.states}).then((()=>{console.log("資料庫修改成功！",this.item.states)})).catch((t=>{console.error("資料庫更新失敗！",t)}))},delFn(){if(""==this.item.id)return!1;this.$q.dialog({title:"刪除確認",message:`要刪除${this.item.name}嗎？`,cancel:!0,persistent:!0}).onOk((()=>{this.$q.dialog({title:"警告",message:"再次確認？",cancel:!0}).onOk((()=>{n["a"].collection("MDBUsers").doc(this.item.id).delete().then((()=>{this.$q.notify(this.item.name+"已刪除"),this.$router.go(-1)})),this.DeleteUsers(this.item.id)}))}))},ListAllUsers(){const t=n["b"].httpsCallable("AdminListUsers");t().then((t=>{t.data.forEach((t=>{let e={uid:t.uid,name:t.displayName,email:t.email};this.AllUsers.push(e),this.options.push(t.email)}))}))},DeleteUsers(t){const e=n["b"].httpsCallable("AdminDeleteUsers");e({uid:t}).then((t=>{console.log(t.data)}))}}},o=c,r=s("2877"),m=s("66e5"),d=s("4074"),h=s("9564"),u=s("0170"),p=s("9c40"),b=s("eb85"),g=s("eebe"),f=s.n(g),q=Object(r["a"])(o,a,i,!1,null,null,null);e["default"]=q.exports;f()(q,"components",{QItem:m["a"],QItemSection:d["a"],QToggle:h["a"],QItemLabel:u["a"],QBtn:p["a"],QSeparator:b["a"]})}}]);