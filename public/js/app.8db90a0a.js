(function(e){function t(t){for(var a,r,s=t[0],i=t[1],c=t[2],d=0,u=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);h&&h(t);while(u.length)u.shift()();return l.push.apply(l,c||[]),o()}function o(){for(var e,t=0;t<l.length;t++){for(var o=l[t],a=!0,r=1;r<o.length;r++){var s=o[r];0!==n[s]&&(a=!1)}a&&(l.splice(t--,1),e=i(i.s=o[0]))}return e}var a={},r={5:0},n={5:0},l=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{1:"1c5def0c",2:"772819f8",3:"e1e8a3de",4:"3c0c98f9",6:"8c82752d"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(e){var t=[],o={1:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=new Promise((function(t,o){for(var a="css/"+({}[e]||e)+"."+{1:"4c51dfdd",2:"31d6cfe0",3:"31d6cfe0",4:"31d6cfe0",6:"31d6cfe0"}[e]+".css",n=i.p+a,l=document.getElementsByTagName("link"),s=0;s<l.length;s++){var c=l[s],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===a||d===n))return t()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){c=u[s],d=c.getAttribute("data-href");if(d===a||d===n)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||n,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.request=a,delete r[e],h.parentNode.removeChild(h),o(l)},h.href=n;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[e]=0})));var a=n[e];if(0!==a)if(a)t.push(a[2]);else{var l=new Promise((function(t,o){a=n[e]=[t,o]}));t.push(a[2]=l);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=s(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(h);var o=n[e];if(0!==o){if(o){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",u.name="ChunkLoadError",u.type=a,u.request=r,o[1](u)}n[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(o,a,function(t){return e[t]}.bind(null,a));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var h=d;l.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0047":function(e,t,o){},"2f39":function(e,t,o){"use strict";o.r(t);o("e6cf"),o("5319"),o("7d6e"),o("e54f"),o("985d"),o("0047");var a=o("2b0e"),r=o("db10"),n=o("42d2"),l=o("b05d"),s=o("2a19"),i=o("436b"),c=o("18d6");a["a"].use(l["a"],{config:{notify:{}},lang:r["a"],iconSet:n["a"],plugins:{Notify:s["a"],Dialog:i["a"],LocalStorage:c["a"]}});var d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view")],1)},u=[],h=o("ded3"),f=o.n(h),p=o("2f62"),m={name:"App",methods:f()({},Object(p["b"])("auth",["handleAuthStateChange","getDepartment","getAllRoles"])),mounted(){this.handleAuthStateChange(),this.getAllRoles()}},g=m,b=o("2877"),w=Object(b["a"])(g,d,u,!1,null,null,null),v=w.exports,y=(o("ddb0"),o("fc1b")),R={counties:["台北市","基隆市","新北市","宜蘭縣","桃園市","新竹市","新竹縣","苗栗縣","台中市","彰化縣","南投縣","嘉義市","嘉義縣","雲林縣","台南市","高雄市","屏東縣","台東縣","花蓮縣","澎湖縣","金門縣","連江縣"],districts:[["中正區","大同區","中山區","松山區","大安區","萬華區","信義區","士林區","北投區","內湖區","南港區","文山區"],["仁愛區","信義區","中正區","中山區","安樂區","暖暖區","七堵區"],["萬里區","金山區","板橋區","汐止區","深坑區","石碇區","瑞芳區","平溪區","雙溪區","貢寮區","新店區","坪林區","烏來區","永和區","中和區","土城區","三峽區","樹林區","鶯歌區","三重區","新莊區","泰山區","林口區","蘆洲區","五股區","八里區","淡水區","三芝區","石門區"],["宜蘭市","頭城鎮","礁溪鄉","壯圍鄉","員山鄉","羅東鎮","三星鄉","大同鄉","五結鄉","冬山鄉","蘇澳鎮","南澳鄉","釣魚台列嶼"],["中壢區","平鎮區","龍潭區","楊梅區","新屋區","觀音區","桃園區","龜山區","八德區","大溪區","復興區","大園區","蘆竹區"],["東區","北區","香山區"],["竹北市","湖口鄉","新豐鄉","新埔鎮","關西鎮","芎林鄉","寶山鄉","竹東鎮","五峰鄉","橫山鄉","尖石鄉","北埔鄉","峨眉鄉"],["竹南鎮","頭份市","三灣鄉","南庄鄉","獅潭鄉","後龍鎮","通霄鎮","苑裡鎮","苗栗市","造橋鄉","頭屋鄉","公館鄉","大湖鄉","泰安鄉","銅鑼鄉","三義鄉","西湖鄉","卓蘭鎮"],["中區","東區","南區","西區","北區","北屯區","西屯區","南屯區","太平區","大里區","霧峰區","烏日區","豐原區","后里區","石岡區","東勢區","和平區","新社區","潭子區","大雅區","神岡區","大肚區","沙鹿區","龍井區","梧棲區","清水區","大甲區","外埔區","大安區"],["彰化市","芬園鄉","花壇鄉","秀水鄉","鹿港鎮","福興鄉","線西鄉","和美鎮","伸港鄉","員林市","社頭鄉","永靖鄉","埔心鄉","溪湖鎮","大村鄉","埔鹽鄉","田中鎮","北斗鎮","田尾鄉","埤頭鄉","溪州鄉","竹塘鄉","二林鎮","大城鄉","芳苑鄉","二水鄉"],["南投市","中寮鄉","草屯鎮","國姓鄉","埔里鎮","仁愛鄉","名間鄉","集集鎮","水里鄉","魚池鄉","信義鄉","竹山鎮","鹿谷鄉"],["東區","西區"],["番路鄉","梅山鄉","竹崎鄉","阿里山","中埔鄉","大埔鄉","水上鄉","鹿草鄉","太保市","朴子市","東石鄉","六腳鄉","新港鄉","民雄鄉","大林鎮","溪口鄉","義竹鄉","布袋鎮"],["斗南鎮","大埤鄉","虎尾鎮","土庫鎮","褒忠鄉","東勢鄉","台西鄉","崙背鄉","麥寮鄉","斗六市","林內鄉","古坑鄉","莿桐鄉","西螺鎮","二崙鄉","北港鎮","水林鄉","口湖鄉","四湖鄉","元長鄉"],["中西區","東區","南區","北區","安平區","安南區","永康區","歸仁區","新化區","左鎮區","玉井區","楠西區","南化區","仁德區","關廟區","龍崎區","官田區","麻豆區","佳里區","西港區","七股區","將軍區","學甲區","北門區","新營區","後壁區","白河區","東山區","六甲區","下營區","柳營區","鹽水區","善化區","大內區","山上區","新市區","安定區"],["新興區","前金區","苓雅區","鹽埕區","鼓山區","旗津區","前鎮區","三民區","楠梓區","小港區","左營區","仁武區","大社區","東沙群島","南沙群島","岡山區","路竹區","阿蓮區","田寮區","燕巢區","橋頭區","梓官區","彌陀區","永安區","湖內區","鳳山區","大寮區","林園區","鳥松區","大樹區","旗山區","美濃區","六龜區","內門區","杉林區","甲仙區","桃源區","那瑪夏區","茂林區","茄萣區"],["屏東市","三地門鄉","霧台鄉","瑪家鄉","九如鄉","里港鄉","高樹鄉","鹽埔鄉","長治鄉","麟洛鄉","竹田鄉","內埔鄉","萬丹鄉","潮州鎮","泰武鄉","來義鄉","萬巒鄉","崁頂鄉","新埤鄉","南州鄉","林邊鄉","東港鎮","琉球鄉","佳冬鄉","新園鄉","枋寮鄉","枋山鄉","春日鄉","獅子鄉","車城鄉","牡丹鄉","恆春鎮","滿州鄉"],["台東市","綠島鄉","蘭嶼鄉","延平鄉","卑南鄉","鹿野鄉","關山鎮","海端鄉","池上鄉","東河鄉","成功鎮","長濱鄉","太麻里","金峰鄉","大武鄉","達仁鄉"],["花蓮市","新城鄉","秀林鄉","吉安鄉","壽豐鄉","鳳林鎮","光復鄉","豐濱鄉","瑞穗鄉","萬榮鄉","玉里鎮","卓溪鄉","富里鄉"],["馬公市","西嶼鄉","望安鄉","七美鄉","白沙鄉","湖西鄉"],["金沙鎮","金湖鎮","金寧鄉","金城鎮","烈嶼鄉","烏坵鄉"],["南竿鄉","北竿鄉","莒光鄉","東引鄉"]]};const D={Cassify:[],professionalTitle:[],counties:R.counties,districts:R.districts},F={setCassify(e,t){e.Cassify=[...t]},setProfessionalTitle(e,t){e.professionalTitle=[...t]}},S={UpdateCassify({commit:e},t){let o={"分類":t};y["a"].collection("SettingData").doc("分類").update(o).then((()=>{e("setCassify",t),console.log("資料庫修改成功！")})).catch((e=>{console.error("資料庫更新失敗！",e)}))},ReadCassify({commit:e}){y["a"].collection("SettingData").doc("分類").get().then((t=>{e("setCassify",t.data().分類)})).catch((e=>{console.log(e.message)}))},readProfessionalTitle({commit:e}){y["a"].collection("SettingData").doc("職業職稱").get().then((t=>{t.exists?e("setProfessionalTitle",t.data()["職業職稱片語"]):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}},j={};var O={namespaced:!0,state:D,mutations:F,actions:S,getters:j};o("4e82"),o("498a"),o("1732");const P={mdb:!1,tasksDownloaded:!1,FieldRecord:{},search:"",sort:"none",currentId:""},A={setMDB(e,t){e.mdb=t},clearFieldReord(e){e.FieldRecord={}},setFieldReord(e,t){e.FieldRecord=Object.assign({},t)},setSearch(e,t){e.search=t},setSort(e,t){e.sort=t},setTasksDownloaded(e,t){e.tasksDownloaded=t},setCurrentId(e,t){e.currentId=t},setFilter(e,t){e.filter=t},updateFieldRecord(e,t){a["a"].set(e.FieldRecord,t.id,t.data)},deleteFieldRecord(e,t){a["a"].delete(e.FieldRecord,t)},addFieldRecord(e,t){a["a"].set(e.FieldRecord,t.id,t.data)}},C={setFilter({commit:e},t){e("setFilter",t)},setSearch({commit:e},t){e("setSearch",t)},setSort({commit:e},t){e("setSort",t)},addFieldRecord({commit:e,dispatch:t},o){y["a"].collection("現場紀錄表").add(o).then((t=>{e("setCurrentId",t.id);let a={id:t.id,data:o};e("addFieldRecord",a),console.log("資料庫新增成功！",t.id)})).catch((e=>{console.error("資料庫儲存失敗！",e)}))},updateFieldRecord({commit:e},t){y["a"].collection("現場紀錄表").doc(t.id).update(t.data).then((()=>{e("updateFieldRecord",t),console.log("資料庫修改成功！")})).catch((e=>{console.error("資料庫更新失敗！",e)}))},deleteFieldRecord({commit:e},t){y["a"].collection("現場紀錄表").doc(t).delete().then((()=>{e("deleteFieldRecord",t),console.log("資料刪除成功！")}))}},E={FindRecordLength:(e,t)=>Object.keys(t.FieldReordFiltered).length,FieldReordSorted:e=>{if("none"===e.sort)return e.FieldRecord;let t={},o=Object.keys(e.FieldRecord);return o.sort(((t,o)=>{let a=e.FieldRecord[t][e.sort],r=e.FieldRecord[o][e.sort];return a.localeCompare(r,"zh-hant")})),o.forEach((o=>{t[o]=e.FieldRecord[o]})),t},FieldReordFiltered:(e,t)=>{let o=t.FieldReordSorted,a={},r=e.search.trim(),n=r.split(/\s+/);return e.search?(Object.keys(o).forEach((e=>{let t=o[e],r=!0,l=[],s=n.length;while(s--)l[s]=!1;n.forEach(((e,o)=>{Object.keys(t).forEach((a=>{if("string"===typeof t[a]){let r=t[a],n=e.toLowerCase();r.includes(n)&&(l[o]=!0)}}))})),l.forEach((function(e){0==e&&(r=!1)})),r&&(a[e]=t)})),a):o}};var I={namespaced:!0,state:P,mutations:A,actions:C,getters:E},U=(o("c975"),o("f508")),k=o("d046"),x=o("3fc9");const N={loggedIn:!1,newRouter:[],newMenu:[],allRoles:[],userData:{}},M={setLoggedIn(e,t){e.loggedIn=t},setNewRouter(e,t){e.newRouter=t},setNewMenu(e,t){e.newMenu=t},setAllRoles(e,t){e.allRoles=t},setUserData(e,t){e.userData=t},clearUserData(e){e.userData={}},clearNewMenu(e){e.newMenu=[]},clearNewRouter(e){e.newRouter=[]},clearAllRoles(e){e.allRoles=[]}},L={registerUser({},e){U["a"].show(),y["d"].createUserWithEmailAndPassword(e.email,e.password).then((t=>{console.log("response: ",t),y["d"].currentUser.sendEmailVerification().then((()=>{Object(x["a"])("請到註冊的郵件信箱收信，點擊連結回傳確認。","註冊成功")})).catch((e=>{Object(x["a"])("寄發認證郵件錯誤"+e)})),e.createAt=new Date,e.changeAt=new Date,e.role=["Index"],e.memo="",e.states=!1,delete e.password,y["a"].collection("MDBUsers").doc(t.user.uid).set(e).then((()=>{console.log("註冊新增使用者")})).catch((e=>{console.log(e)}))})).catch((e=>{var t=e.code;"auth/weak-password"==t&&(t="這個密碼太簡單！"),"auth/email-already-in-use"==t&&(t="這個 email 帳號已經被使用過了！"),"auth/invalid-email"==t&&(t="email 不符規定！"),"auth/operation-not-allowed"==t&&(t="未啟用「電子郵件/密碼」登入方式！"),Object(x["a"])(t)}))},loginUser({state:e},t){y["d"].signInWithEmailAndPassword(t.email,t.password).then((e=>{console.log("login:",e),console.log(y["d"].currentUser.uid)})).catch((e=>{Object(x["a"])(e.message)}))},logoutUser(){console.log("logoutUser"),y["d"].signOut(),console.log(y["d"].currentUser.uid)},handleAuthStateChange({state:e,commit:t,dispatch:o}){y["d"].onAuthStateChanged((e=>{if(U["a"].hide(),e){e.displayName,e.email,e.emailVerified,e.photoURL,e.isAnonymous,e.uid,e.providerData;if(!e.emailVerified)return Object(x["a"])("你註冊的Email帳號尚未驗證！請到註冊的郵件信箱收信，點擊連結回傳確認。","注意"),!1;o("getUserData",e.uid)}else t("setLoggedIn",!1),t("clearUserData",null),t("clearNewMenu",null),t("clearNewRouter",null),c["a"].set("loggedIn",!1),this.$router.replace("/auth").catch((e=>{}))}))},getUserData({commit:e,state:t},o){y["a"].collection("MDBUsers").doc(o).get().then((t=>{let o={email:t.data().email,name:t.data().name,role:t.data().role,memo:t.data().memo,telephone:t.data().telephone,states:t.data().states};e("setUserData",o)})).then((()=>{if(t.userData.states){let o=k["b"],a=k["b"][0].children.filter((e=>{if(e.meta)return-1!==t.userData.role.indexOf(e.meta.role)}));o[0].children=a,console.log(o[0].children);let r=o[0].children.map((e=>{let t={title:e.meta.title,icon:e.meta.icon,link:e.path};return console.log(t),t}));e("setNewMenu",r),e("setNewRouter",o),this.$router.addRoutes(o),e("setLoggedIn",!0),c["a"].set("loggedIn",!0),this.$router.replace("/").catch((e=>{}))}else Object(x["a"])(`你的Email帳號${t.userData.name}已註冊並回傳認證，但目前是停用狀態，請洽系統管理員。`,"注意"),y["d"].signOut()}))},getAllRoles({commit:e,state:t}){let o=[];k["b"][0].children.forEach((e=>{e.meta&&o.push(e.meta.role)})),e("setAllRoles",o)}},T={};var _={namespaced:!0,state:N,mutations:M,actions:L,getters:T};a["a"].use(p["a"]);var B=function(){const e=new p["a"].Store({modules:{phrase:O,LoadData:I,auth:_},strict:!1});return e},$=o("8c4f");a["a"].use($["a"]);var q=function(){const e=new $["a"]({scrollBehavior:()=>({x:0,y:0}),routes:k["a"],mode:"hash",base:""});return e},V=async function(){const e="function"===typeof B?await B({Vue:a["a"]}):B,t="function"===typeof q?await q({Vue:a["a"],store:e}):q;e.$router=t;const o={router:t,store:e,render:e=>e(v),el:"#q-app"};return{app:o,store:e,router:t}},z=o("9483");Object(z["a"])("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});var K=o("bc3a"),J=o.n(K);a["a"].prototype.$axios=J.a;var W=({router:e})=>{e.beforeEach(((e,t,o)=>{let a=c["a"].getItem("loggedIn");a||"/auth"===e.path?o():o("/auth")}))};/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&o.e(0).then(o.t.bind(null,"a0db",7));const H="";async function Q(){const{app:e,store:t,router:o}=await V();let r=!1;const n=e=>{r=!0;const t=Object(e)===e?o.resolve(e).route.fullPath:e;window.location.href=t},l=window.location.href.replace(window.location.origin,""),s=[y["default"],void 0,W];for(let c=0;!1===r&&c<s.length;c++)if("function"===typeof s[c])try{await s[c]({app:e,router:o,store:t,Vue:a["a"],ssrContext:null,redirect:n,urlPath:l,publicPath:H})}catch(i){return i&&i.url?void(window.location.href=i.url):void console.error("[Quasar] boot error:",i)}!0!==r&&new a["a"](e)}Q()},"3fc9":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var a=o("436b"),r=o("f508");function n(e,t="錯誤"){r["a"].hide(),a["a"].create({title:t,message:e})}},d046:function(e,t,o){"use strict";o.d(t,"b",(function(){return r}));o("e6cf");const a=[{path:"/",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"8b24"))},{path:"/auth",component:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"3e16"))}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"e51e"))}];t["a"]=a;const r=[{path:"/",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"713b")),children:[{path:"/index",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"8b24")),meta:{title:"行動資料(首頁)",role:"Index",icon:"home",divider:!0}},{path:"/auth",component:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"3e16")),meta:{title:"auth",role:"auth",icon:"home",divider:!0}},{path:"/users",component:()=>Promise.all([o.e(0),o.e(6)]).then(o.bind(null,"5e94")),meta:{title:"使用者管理",role:"PageUsers",icon:"group",divider:!0}}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"e51e"))}]},fc1b:function(e,t,o){"use strict";o.d(t,"d",(function(){return l})),o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return i}));var a=o("59ca"),r=(o("ea7b"),o("66ce"),o("e71f"),o("588e"),o("8934"),{apiKey:"AIzaSyBYCDtdD4-sjpgDvB4gRjSqOq9w7KjDe38",authDomain:"pthgdb-9549c.firebaseapp.com",databaseURL:"https://pthgdb-9549c.firebaseio.com",projectId:"pthgdb-9549c",storageBucket:"pthgdb-9549c.appspot.com",messagingSenderId:"404918654035",appId:"1:404918654035:web:4a7a1e1f7d7d6dd05a62a6"});const n=a["initializeApp"](r),l=n.auth(),s=(n.database(),n.firestore()),i=(n.storage(),n.functions())}});